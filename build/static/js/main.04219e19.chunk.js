(this.webpackJsonptodo=this.webpackJsonptodo||[]).push([[0],{72:function(e,t,n){"use strict";n.r(t);var c,r,o,a,i,d,s,u,l,b,j,p=n(0),O=n.n(p),f=n(23),x=n.n(f),h=n(3),g=n(4),m=n(19),v=g.b.nav(c||(c=Object(h.a)(["\n  width: 60%;\n  text-align: center;\n"]))),w=Object(g.b)(m.b)(r||(r=Object(h.a)(["\n  margin: 0 10px;\n\n  &.active {\n    color: #fe4a49;\n  }\n"]))),y=n(1),S=function(){return Object(y.jsxs)(v,{children:[Object(y.jsx)(w,{exact:!0,to:"/",activeClassName:"active",children:"Todo"}),Object(y.jsx)(w,{to:"/daily",activeClassName:"active",children:"Something"})]})},E=n(6),C=n(21),k=n(14),N=n(13),L=g.b.div(o||(o=Object(h.a)(["\n  padding: 10px 20px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  border-bottom: ",";\n"])),(function(e){return e.last?"none":"1px solid #dee1dd"})),_=g.b.input(a||(a=Object(h.a)(["\n  margin-right: 10px;\n\n  &:checked + label {\n    text-decoration: line-through;\n  }\n"]))),T=g.b.button(i||(i=Object(h.a)(["\n  border: 1px solid #dee1dd;\n  border-radius: 6px;\n  padding: 5px 10px;\n  cursor: pointer;\n  color: #2f575d;\n  display: flex;\n  align-items: center;\n\n  &:disabled {\n    opacity: 0.6;\n    cursor: not-allowed;\n  }\n"]))),D=Object(g.c)(d||(d=Object(h.a)(["\n  0% {\n    transform: rotate(0);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n"]))),I=g.b.svg(s||(s=Object(h.a)(["\n  width: 14px;\n  height: 14px;\n  animation: "," 1s linear infinite;\n"])),D),A=function(){return Object(y.jsx)(I,{"aria-hidden":"true",focusable:"false",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:Object(y.jsx)("path",{fill:"currentColor",d:"M288 39.056v16.659c0 10.804 7.281 20.159 17.686 23.066C383.204 100.434 440 171.518 440 256c0 101.689-82.295 184-184 184-101.689 0-184-82.295-184-184 0-84.47 56.786-155.564 134.312-177.219C216.719 75.874 224 66.517 224 55.712V39.064c0-15.709-14.834-27.153-30.046-23.234C86.603 43.482 7.394 141.206 8.003 257.332c.72 137.052 111.477 246.956 248.531 246.667C393.255 503.711 504 392.788 504 256c0-115.633-79.14-212.779-186.211-240.236C302.678 11.889 288 23.456 288 39.056z"})})},J=function(e){return Object(y.jsxs)(T,{onClick:e.onClick,disabled:e.disabled,children:[e.children," ",e.isLoading&&Object(y.jsx)(A,{})]})},R=g.b.input(u||(u=Object(h.a)(["\n  width: 100%;\n  padding: 5px 10px;\n  border: none;\n  border: 1px solid #dee1dd;\n  border-radius: 6px;\n\n  &:focus {\n    outline: none;\n    border: 1px solid #6d9197;\n  }\n"]))),M=function(e){return Object(y.jsx)(R,{type:e.type,value:e.value,placeholder:e.placeholder,onChange:e.onChange,ref:e.inputRef})},V=function(e){var t=Object(p.useState)(e.text),n=Object(N.a)(t,2),c=n[0],r=n[1],o=Object(p.useState)(!1),a=Object(N.a)(o,2),i=a[0],d=a[1],s=Object(p.useRef)(null);Object(p.useEffect)((function(){s.current.focus()}),[]);return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(M,{type:"text",value:c,onChange:function(e){r(e.target.value)},inputRef:s}),"\xa0",Object(y.jsx)(J,{onClick:function(){d(!0),e.saveEdit(e.id,c)},isLoading:i,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),"\xa0",Object(y.jsx)(J,{onClick:e.cancelEditing,children:"\u041e\u0442\u043c\u0435\u043d\u0430"})]})},X=function(e){var t=Object(p.useState)(!1),n=Object(N.a)(t,2),c=n[0],r=n[1],o=Object(p.useState)(!1),a=Object(N.a)(o,2),i=a[0],d=a[1];return Object(y.jsx)(L,{last:e.length-1===e.index,children:c?Object(y.jsx)(V,{id:e.id,text:e.text,cancelEditing:function(){r(!1)},saveEdit:function(t,n){e.saveEdit(t,n)}}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)("div",{children:[Object(y.jsx)(_,{type:"checkbox",id:e.id,checked:e.completed,onChange:e.toggleCompleted.bind(null,e.id)}),Object(y.jsx)("label",{htmlFor:e.id,children:e.text})]}),Object(y.jsxs)("div",{style:{display:"flex"},children:[Object(y.jsx)(J,{onClick:function(){r(!0)},children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"}),"\xa0",Object(y.jsx)(J,{onClick:function(){d(!0),e.handleDelete(e.id)},isLoading:i,children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})]})})},z=n(5),F=n(8),G=n.n(F),P=n(16),U="SET_TODOS",B="ADD_TODO",q="TOGGLE_COMPLETED",H="DELETE_TODO",K="SAVE_TODO",Q="SET_LOADING",W="SET_ERROR",Y=n(42),Z=n.n(Y);function $(e){return ee.apply(this,arguments)}function ee(){return(ee=Object(P.a)(G.a.mark((function e(t){var n,c,r,o,a,i;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.method,c=void 0===n?"get":n,r=t.url,o=t.data,a=void 0===o?{}:o,e.next=3,Z()({method:c,url:r,data:a}).catch((function(e){throw e.response?new Error(e):e.request?new Error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438 - "+e.message):new Error(e.message)}));case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(e){return{type:W,payload:e}}function ne(e){return{type:Q,payload:e}}function ce(e){return{type:U,payload:{todos:e}}}function re(e){return{type:B,payload:Object(z.a)({},e)}}function oe(e){return{type:q,payload:{id:e}}}function ae(e){return{type:H,payload:{id:e}}}function ie(e,t){return{type:K,payload:{id:e,text:t}}}var de,se,ue,le,be,je=g.b.div(l||(l=Object(h.a)(["\n  width: 40%;\n  margin-top: 20px;\n"]))),pe=g.b.div(b||(b=Object(h.a)(["\n  border: 1px solid #dee1dd;\n  border-radius: 20px;\n"]))),Oe=g.b.div(j||(j=Object(h.a)(["\n  padding: 10px 20px;\n"]))),fe=g.b.div(de||(de=Object(h.a)(["\n  margin-bottom: 40px;\n  display: flex;\n  justify-content: space-between;\n\n  & input {\n    flex: 1;\n    margin-right: 20px;\n  }\n"]))),xe=function(e){var t=Object(p.useState)(""),n=Object(N.a)(t,2),c=n[0],r=n[1],o=Object(p.useState)(!0),a=Object(N.a)(o,2),i=a[0],d=a[1],s=Object(p.useState)(!1),u=Object(N.a)(s,2),l=u[0],b=u[1],j=Object(p.useRef)(null);return Object(p.useEffect)((function(){j.current.focus(),0!==c.length?d(!1):d(!0)}),[c]),Object(y.jsxs)(fe,{children:[Object(y.jsx)(M,{type:"text",placeholder:"\u0427\u0442\u043e \u0441\u0434\u0435\u043b\u0430\u0442\u044c?..",value:c,onChange:function(e){return r(e.target.value)},inputRef:j}),Object(y.jsx)(J,{onClick:function(){0!==c&&(b(!0),e.AddNewTodo(c),r(""))},disabled:i,isLoading:l,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})]})},he=g.b.div(se||(se=Object(h.a)(["\n  display: flex;\n  justify-content: space-between;\n  margin: 10px 0;\n  padding: 0 20px;\n"]))),ge=g.b.div(ue||(ue=Object(h.a)(["\n  color: #929292;\n"]))),me=function(e){var t=e.completed,n=e.todos.filter((function(e){return e.completed===t})).length;return Object(y.jsx)("span",{style:{color:"#000"},children:n})},ve=function(e){var t=e.todos;return Object(y.jsxs)(he,{children:[Object(y.jsxs)(ge,{children:["\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043d\u044b\u0435: ",Object(y.jsx)(me,{completed:!0,todos:t})]}),Object(y.jsxs)(ge,{children:["\u0412 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435: ",Object(y.jsx)(me,{completed:!1,todos:t})]})]})},we=function(e){return function(t){return t.isLoading?Object(y.jsx)("div",{children:"Loading..."}):t.error?Object(y.jsxs)("div",{children:["\u041e\u0448\u0438\u0431\u043a\u0430:",Object(y.jsx)("div",{style:{background:"#ccc",borderRadius:"5px",padding:"10px 20px"},children:t.error.toString()}),Object(y.jsx)("br",{}),"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443."]}):Object(y.jsxs)(je,{children:[Object(y.jsx)(xe,{AddNewTodo:t.AddNewTodo,isLoadingAtAdd:t.isLoadingAtAdd}),Object(y.jsx)(ve,{todos:t.todos}),Object(y.jsx)(pe,{children:0!==t.todos.length?t.todos.map((function(n,c){return Object(y.jsx)(e,{id:n.id,text:n.text,completed:n.completed,length:t.todos.length,index:c,toggleCompleted:t.handleCompleted,handleDelete:t.handleDelete,saveEdit:t.handleSaveEditing},n.id)})):Object(y.jsx)(Oe,{children:"\u0412\u0430\u0448 \u0441\u043f\u0438\u0441\u043e\u043a \u0437\u0430\u0434\u0430\u0447 \u043f\u0443\u0441\u0442."})})]})}},ye=function(){var e=we(X),t=Object(k.b)(),n=Object(k.c)((function(e){return e.todos.isCached}));O.a.useEffect((function(){if(n){var e=window.localStorage.getItem("todo");t(ce(JSON.parse(e)))}else t(function(){var e=Object(P.a)(G.a.mark((function e(t){var n,c;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(ne(!0)),e.prev=1,e.next=4,$({url:"https://todo-a1539-default-rtdb.firebaseio.com/todos.json"});case 4:n=e.sent,c=[],Object.keys(n.data||[]).forEach((function(e){c.push({id:e,text:n.data[e].text,completed:n.data[e].completed})})),t(ce(c)),window.localStorage.setItem("todo",JSON.stringify(c)),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),t(ne(!1)),t(te(e.t0));case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}())}),[t,n]);var c=Object(k.c)((function(e){return e.todos.items})),r=Object(k.c)((function(e){return e.todos.isLoading})),o=Object(k.c)((function(e){return e.todos.error})),a=Object(k.c)((function(e){return e.todos.addLoading})),i=Object(C.a)(c).reverse();return Object(y.jsx)(e,{isLoading:r,error:o,todos:i,isLoadingAtAdd:a,handleCompleted:function(e){var n=null;i.forEach((function(t){t.id===e&&(n=!t.completed)})),t(function(e,t){return function(){var n=Object(P.a)(G.a.mark((function n(c){var r;return G.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c(oe(e)),r=JSON.parse(window.localStorage.getItem("todo")).map((function(n){return n.id===e&&(n.completed=t),n})),window.localStorage.setItem("todo",JSON.stringify(r)),n.prev=3,n.next=6,$({method:"patch",url:"https://todo-a1539-default-rtdb.firebaseio.com/todos/"+e+".json",data:{completed:t}});case 6:n.next=11;break;case 8:n.prev=8,n.t0=n.catch(3),c(te(n.t0));case 11:case"end":return n.stop()}}),n,null,[[3,8]])})));return function(e){return n.apply(this,arguments)}}()}(e,n))},handleDelete:function(e){t(function(e){return function(){var t=Object(P.a)(G.a.mark((function t(n){var c;return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,$({method:"delete",url:"https://todo-a1539-default-rtdb.firebaseio.com/todos/"+e+".json"});case 3:n(ae(e)),c=JSON.parse(window.localStorage.getItem("todo")).filter((function(t){return t.id!==e})),window.localStorage.setItem("todo",JSON.stringify(c)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n(te(t.t0));case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}(e))},handleSaveEditing:function(e,n){t(function(e,t){return function(){var n=Object(P.a)(G.a.mark((function n(c){var r;return G.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,$({method:"patch",url:"https://todo-a1539-default-rtdb.firebaseio.com/todos/"+e+".json",data:{text:t}});case 3:c(ie(e,t)),r=JSON.parse(window.localStorage.getItem("todo")).map((function(n){return n.id===e&&(n.text=t),n})),window.localStorage.setItem("todo",JSON.stringify(r)),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),c(te(n.t0));case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}()}(e,n))},AddNewTodo:function(e){t(function(e){return function(){var t=Object(P.a)(G.a.mark((function t(n){var c,r,o;return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c={text:e,completed:!1},t.prev=1,t.next=4,$({method:"post",url:"https://todo-a1539-default-rtdb.firebaseio.com/todos.json",data:Object(z.a)({},c)});case 4:r=t.sent,c.id=r.data.name,n(re(c)),(o=JSON.parse(window.localStorage.getItem("todo"))).push(c),window.localStorage.setItem("todo",JSON.stringify(o)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),n(te(t.t0));case 15:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e){return t.apply(this,arguments)}}()}(e))}})},Se=function(){return Object(y.jsxs)(E.c,{children:[Object(y.jsx)(E.a,{exact:!0,path:"/",children:Object(y.jsx)(ye,{})}),Object(y.jsx)(E.a,{path:"/daily",children:"New feature coming soon..."}),Object(y.jsx)(E.a,{children:"No match"})]})},Ee=g.b.div(le||(le=Object(h.a)(["\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n"]))),Ce=function(){return Object(y.jsxs)(Ee,{children:[Object(y.jsx)(S,{}),Object(y.jsx)(Se,{})]})},ke=Object(g.a)(be||(be=Object(h.a)(["\n*,\n  *:after,\n  *:before {\n    box-sizing: border-box;\n  }\n  body {\n    font-family: 'Ubuntu', sans-serif;\n    font-size: 14px;\n    margin: 0;\n    padding: 0;\n    height: 100vh;\n  }\n  #root {\n      height: 100%;\n  }\n  a {\n    color: #009cff;\n    text-decoration: none;\n  }\n  a:hover {\n    color: #fe4a49;\n    text-decoration: underline;\n  }\n"]))),Ne=n(22),Le=n(43),_e={items:[],isLoading:!1,error:null,isCached:!1},Te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Q:return Object(z.a)(Object(z.a)({},e),{},{isLoading:t.payload});case W:return Object(z.a)(Object(z.a)({},e),{},{error:t.payload});case U:return Object(z.a)(Object(z.a)({},e),{},{items:t.payload.todos,isLoading:!1,isCached:!0});case B:return Object(z.a)(Object(z.a)({},e),{},{items:[].concat(Object(C.a)(e.items),[t.payload]),isCached:!0});case q:return Object(z.a)(Object(z.a)({},e),{},{items:e.items.map((function(e){return e.id===t.payload.id?Object(z.a)(Object(z.a)({},e),{},{completed:!e.completed}):e}))});case H:return Object(z.a)(Object(z.a)({},e),{},{items:Object(C.a)(e.items.filter((function(e){return e.id!==t.payload.id})))});case K:return Object(z.a)(Object(z.a)({},e),{},{items:e.items.map((function(e){return e.id===t.payload.id?Object(z.a)(Object(z.a)({},e),{},{text:t.payload.text}):e}))});default:return e}},De="object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):Ne.c,Ie=Object(Ne.b)({todos:Te}),Ae=Object(Ne.d)(Ie,De(Object(Ne.a)(Le.a)));x.a.render(Object(y.jsxs)(O.a.StrictMode,{children:[Object(y.jsx)(ke,{}),Object(y.jsx)(k.a,{store:Ae,children:Object(y.jsx)(m.a,{children:Object(y.jsx)(Ce,{})})})]}),document.getElementById("root"))}},[[72,1,2]]]);
//# sourceMappingURL=main.04219e19.chunk.js.map